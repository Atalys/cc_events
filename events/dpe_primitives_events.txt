
namespace = dpe_primitives



#on_space_battle_won
country_event = {
	id = mem_dpe_primitive_events.1
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		fromfrom.solar_system = {
			check_variable = {
				which = dpe_space_battle
				value > 20
			}
			any_planet = {
				has_owner = yes
				exists = owner
				owner = {
					is_country_type = primitive
					
					NOT = { has_country_flag = mem_dpe_has_discovered_aliens }
				}
				if = {
					limit = { has_observation_outpost = yes }
					observation_outpost = {
						NOT = {
							has_mission = covert_infiltration
						}
					}
				}
			}
		}
	}
	
	immediate = {
		fromfrom.solar_system = {
			random_planet = {
				limit = {
					has_owner = yes
					exists = owner
					owner = { is_country_type = primitive }
				}
				owner = {
					save_event_target_as = dpe_primitives
				}
				if = {
					limit = { has_observation_outpost = yes }
					random_list = {
						1 = {
							observation_outpost_owner = {
								country_event = { id = mem_dpe_primitive_events.2 days = 20 }
							}
							modifier = {
								factor = 2
								solar_system = {
									check_variable = {
										which = dpe_space_battle
										value > 40
									}
								}
							}
							modifier = {
								factor = 2
								solar_system = {
									check_variable = {
										which = dpe_space_battle
										value > 60
									}
								}
							}
							modifier = {
								factor = 2
								solar_system = {
									check_variable = {
										which = dpe_space_battle
										value > 80
									}
								}
							}
							modifier = {
								factor = 2
								solar_system = {
									check_variable = {
										which = dpe_space_battle
										value > 100
									}
								}
							}
							modifier = {
								factor = 2
								solar_system = {
									check_variable = {
										which = dpe_space_battle
										value > 120
									}
								}
							}
							modifier = {
								factor = 2
								solar_system = {
									check_variable = {
										which = dpe_space_battle
										value > 150
									}
								}
							}
							modifier = {
								factor = 10
								solar_system = {
									check_variable = {
										which = dpe_space_battle
										value > 200
									}
								}
							}
						}
						2 = { #they miss it
							#set the modifiers for the level of primitiveness - low up to middle ages, but unmissable for early space age
							modifier = {
								factor = 2.5
								owner = {
									OR = {
										has_country_flag = stone_age
										has_country_flag = bronze_age
									}
								}
							}
							modifier = {
								factor = 1.5
								owner = {
									OR = {
										has_country_flag = iron_age
										has_country_flag = late_medieval_age
									}
								}
							}
							modifier = { #just so I don't lose the flags
								factor = 1
								owner = {
									OR = {
										has_country_flag = renaissance_age
										has_country_flag = steam_age
									}
								}
							}
							modifier = {
								factor = 0.75
								owner = {
									has_country_flag = machine_age
								}
							}
							modifier = {
								factor = 0.5
								owner = {
									has_country_flag = atomic_age
								}
							}
							modifier = {
								factor = 0
								owner = {
									has_country_flag = early_space_age
								}
							}
						}
					}
				}
				
				else = {
					if = {
						limit = {
							owner = {
								has_country_flag = early_space_age
							}
						}
						root = {
							country_event = { id = mem_dpe_primitive_events.3 days = 60 random = 360 }
						}
					}
				}
			}
		}
	}
}
					
country_event = {
	id = dpe_primitives.2
	title = dpe_primitives.2.name

	desc = {
		trigger = {
			event_target:dpe_primitives = {
				OR = {
					has_country_flag = stone_age
					has_country_flag = bronze_age
					has_country_flag = iron_age
				}
			}
		}
		text = dpe_primitives.2.primitive
	}
	desc = {
		trigger = {
			event_target:dpe_primitives = {
				OR = {
					has_country_flag = late_medieval_age
					has_country_flag = renaissance_age
				}
			}
		}
		text = dpe_primitives.2.enlightened
	}
	desc = {
		trigger = {
			event_target:dpe_primitives = {
				OR = {
					has_country_flag = steam_age
					has_country_flag = machine_age
					has_country_flag = atomic_age
				}
			}
		}
		text = dpe_primitives.2.machine
	}
	desc = {
		trigger = {
			event_target:dpe_primitives = {
				has_country_flag = early_space_age
			}
		}
		text = dpe_primitives.2.space_age
	}

	immediate = {
		if = {
			limit = {
				event_target:dpe_primitives = {
					has_country_flag = early_space_age
				}
			}
			country_event = { id = mem_dpe_primitive_events.3 days = 60 random = 360 }
		}
	}

	option = { #need several for different ethics

	}
}	
					
					
					
#other event: MTTH, much more likely to happen if you 
		
